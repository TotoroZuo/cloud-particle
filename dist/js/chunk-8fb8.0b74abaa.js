(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-8fb8"],{"2fdb":function(t,e,s){"use strict";var a=s("5ca1"),n=s("d2c8"),i="includes";a(a.P+a.F*s("5147")(i),"String",{includes:function(t){return!!~n(this,t,i).indexOf(t,1<arguments.length?arguments[1]:void 0)}})},"490d":function(t,e,s){},5147:function(t,e,s){var a=s("2b4c")("match");t.exports=function(e){var s=/./;try{"/./"[e](s)}catch(t){try{return s[a]=!1,!"/./"[e](s)}catch(e){}}return!0}},6762:function(t,e,s){"use strict";var a=s("5ca1"),n=s("c366")(!0);a(a.P,"Array",{includes:function(t){return n(this,t,1<arguments.length?arguments[1]:void 0)}}),s("9c6c")("includes")},"886f":function(t,e,s){"use strict";var a=s("490d");s.n(a).a},a96b:function(t,e,s){"use strict";s.r(e);function n(t){return function(t){if(Array.isArray(t)){for(var e=0,s=new Array(t.length);e<t.length;e++)s[e]=t[e];return s}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}s("7f7f"),s("ac6a"),s("6762"),s("2fdb");var a=s("2ef0"),i=s.n(a),o={name:"statisticsList",data:function(){return{search:"",selectDate:null,cateType:1,curPage:1,total:0,dataList:[],importing:!1,selectOptions:[],selectOptionsKeys:[],selectOptionsTempKeys:[],optionsList:[]}},mounted:function(){this.cateType=this.$store.state.user.info.groupId,this.getConfigList(),this.getPageList()},methods:{isIncludes:function(t,e){return i.a.includes(t,e)},getConfigList:function(){var a=this;this.$apis.statistics.getConfigList({}).then(function(t){if("0000"==t.code){a.optionsList=t.data;var e,s=[];t.data.forEach(function(t){s.push(t.name)}),e=s.splice(0,7),a.selectOptionsKeys=e,a.selectOptionsTempKeys=n(e)}else a.$notify({title:"数据异常",message:t.data,type:"warning"})}).catch(function(t){t&&console.log(t)})},getPageList:function(){var e=this,t={page:this.curPage,matchType:this.cateType};this.selectDate&&(t.startDate=this.selectDate[0],t.endDate=this.selectDate[1]),this.$apis.statistics.getPageList(t).then(function(t){"0000"==t.code?(e.total=t.count,e.dataList=t.data):e.$notify({title:"数据异常",message:t.data,position:"top-right",type:"warning"})}).catch(function(t){t&&console.log(t)})},handleCurrentChange:function(t){this.curPage=t,this.getPageList()},doOptionSelect:function(){this.selectOptionsKeys=n(this.selectOptionsTempKeys)},clearTempOptions:function(t){console.log(t),t||(this.selectOptionsTempKeys=n(this.selectOptionsKeys))},doExport:function(){var e=this,t={};if(this.selectDate&&(t.startDate=this.selectDate[0],t.endDate=this.selectDate[1]),this.importing)return!1;this.importing=!0,this.$apis.statistics.doExport(t).then(function(t){"0000"==t.code?e.$common.openDownLoadLink(t.data,!0):e.$notify({title:"数据异常",message:t.data,position:"top-right",type:"warning"}),e.importing=!1}).catch(function(t){e.importing=!1,t&&console.log(t)})}},watch:{selectDate:function(t){this.getPageList()}},computed:{userInfo:function(){return this.$store.state.user.info}}},r=(s("886f"),s("2877")),c=Object(r.a)(o,function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"global-list-container royal-paper royal-paper-1"},[a("div",{staticClass:"search-container"},[a("div",{staticClass:"search-left"},[a("el-radio-group",{attrs:{size:"small"},on:{change:s.getPageList},model:{value:s.cateType,callback:function(t){s.cateType=t},expression:"cateType"}},[1==s.userInfo.groupId?a("el-radio-button",{attrs:{label:1}},[s._v("分局")]):s._e(),s.userInfo.groupId<3?a("el-radio-button",{attrs:{label:2}},[s._v("派出所")]):s._e(),s.userInfo.groupId<=3?a("el-radio-button",{attrs:{label:3}},[s._v("警务室")]):s._e()],1),a("el-dropdown",{staticStyle:{float:"right","margin-left":"15px"},attrs:{size:"small","split-button":"",type:"primary",trigger:"click"},on:{"visible-change":s.clearTempOptions}},[s._v("\n            配置数据项\n            "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-scrollbar",{attrs:{"wrap-class":"option-group-wrap"}},[a("el-checkbox-group",{staticClass:"optionGroup",attrs:{size:"small"},model:{value:s.selectOptionsTempKeys,callback:function(t){s.selectOptionsTempKeys=t},expression:"selectOptionsTempKeys"}},s._l(s.optionsList,function(t,e){return a("el-checkbox",{key:t.name,attrs:{label:t.name,disabled:!e}},[s._v(s._s(t.value))])}))],1),a("el-button",{staticClass:"do-option-select",attrs:{type:"text"},on:{click:s.doOptionSelect}},[s._v("确定")])],1)],1),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small",disabled:s.importing},on:{click:s.doExport}},[s._v("导出表格")])],1),a("div",{staticClass:"search-right"},[a("el-date-picker",{staticClass:"statistics-search-date",attrs:{size:"mini",type:"daterange",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"起始时间","end-placeholder":"结束时间"},on:{clear:s.getPageList},model:{value:s.selectDate,callback:function(t){s.selectDate=t},expression:"selectDate"}})],1)]),a("div",{staticClass:"list-wrap"},[a("el-table",{staticClass:"statisticsList-table",staticStyle:{width:"100%"},attrs:{data:s.dataList}},[a("el-table-column",{attrs:{label:"序号",width:"60"},scopedSlots:s._u([{key:"default",fn:function(t){return[s._v("\n                    "+s._s(t.$index+1)+"\n                ")]}}])}),a("el-table-column",{attrs:{label:"组织名称","min-width":"100",align:"center",prop:"org"}}),s._l(s.optionsList,function(t){return s.isIncludes(s.selectOptionsKeys,t.name)?a("el-table-column",{key:t.name,attrs:{label:t.value,align:"center","min-width":"130",sortable:"",prop:t.name}}):s._e()})],2)],1),s.total?a("div",{staticClass:"pagination-wrap"},[a("el-pagination",{attrs:{"current-page":s.curPage,"page-size":10,layout:"total,prev, pager, next, jumper",total:s.total},on:{"current-change":s.handleCurrentChange}})],1):s._e()])},[],!1,null,"081a2c93",null);c.options.__file="List.vue",e.default=c.exports},d2c8:function(t,e,s){var a=s("aae3"),n=s("be13");t.exports=function(t,e,s){if(a(e))throw TypeError("String#"+s+" doesn't accept regex!");return String(n(t))}}}]);
//# sourceMappingURL=chunk-8fb8.0b74abaa.js.map